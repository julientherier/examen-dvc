schema: '2.0'
stages:
  split:
    cmd: python src/data/data_split.py
    deps:
    - path: data/raw_data/clean_data.csv
      hash: md5
      md5: 617b56af2992376d5c3e91ad80823898
      size: 333757
    - path: src/data/data_split.py
      hash: md5
      md5: ca07931e4c71f0723e8d552647795cc8
      size: 2293
    params:
      params.yaml:
        split.drop_columns:
        - date
        split.random_state: 42
        split.target_col: silica_concentrate
        split.test_size: 0.3
    outs:
    - path: data/processed_data/X_test.csv
      hash: md5
      md5: 707de7ab5221df8365ee5c622414e388
      size: 79148
    - path: data/processed_data/X_train.csv
      hash: md5
      md5: 262dc7a9b32e262a3896db9b7cb632ef
      size: 184057
    - path: data/processed_data/y_test.csv
      hash: md5
      md5: 5b38d7f1d33d69d59474bfe27d9d039d
      size: 9723
    - path: data/processed_data/y_train.csv
      hash: md5
      md5: 8eeb47fac58928dc66f5992035227df4
      size: 22759
  normalize:
    cmd: python src/data/normalize.py
    deps:
    - path: data/processed_data/X_test.csv
      hash: md5
      md5: 707de7ab5221df8365ee5c622414e388
      size: 79148
    - path: data/processed_data/X_train.csv
      hash: md5
      md5: 262dc7a9b32e262a3896db9b7cb632ef
      size: 184057
    - path: src/data/normalize.py
      hash: md5
      md5: 72a949ca8fac71e21f4abfe79be679de
      size: 1863
    outs:
    - path: data/processed_data/X_test_scaled.csv
      hash: md5
      md5: d88f7b762247806ce779f1da894f6631
      size: 85439
    - path: data/processed_data/X_train_scaled.csv
      hash: md5
      md5: 949fb334e27072290cd8dcb4624efd56
      size: 198672
  gridsearch:
    cmd: python src/models/grid_search.py
    deps:
    - path: data/processed_data/X_train_scaled.csv
      hash: md5
      md5: 949fb334e27072290cd8dcb4624efd56
      size: 198672
    - path: data/processed_data/y_train.csv
      hash: md5
      md5: 8eeb47fac58928dc66f5992035227df4
      size: 22759
    - path: src/models/grid_search.py
      hash: md5
      md5: eefb76fe26b5aa6d01127b1111d8917b
      size: 3794
    params:
      params.yaml:
        grid_search:
          model_type: random_forest
          cv: 5
          scoring: neg_mean_squared_error
          n_jobs: -1
          random_state: 42
          random_forest:
            n_estimators:
            - 200
            - 500
            max_depth:
            - 
            - 5
            - 10
            - 20
            min_samples_split:
            - 2
            - 5
            - 10
            min_samples_leaf:
            - 1
            - 2
            - 4
    outs:
    - path: models/best_params.pkl
      hash: md5
      md5: 64f4ef6296ae3bcb4a263e725776fdb4
      size: 91
  training:
    cmd: python src/models/training.py
    deps:
    - path: data/processed_data/X_train_scaled.csv
      hash: md5
      md5: 949fb334e27072290cd8dcb4624efd56
      size: 198672
    - path: data/processed_data/y_train.csv
      hash: md5
      md5: 8eeb47fac58928dc66f5992035227df4
      size: 22759
    - path: models/best_params.pkl
      hash: md5
      md5: 64f4ef6296ae3bcb4a263e725776fdb4
      size: 91
    - path: src/models/training.py
      hash: md5
      md5: de7d6b52036b01bfb934cd89a89bc3d2
      size: 1783
    outs:
    - path: models/rf_model.pkl
      hash: md5
      md5: 49dda6cdeb70bcd4d6c09ec5508a5332
      size: 25007361
  evaluate:
    cmd: python src/models/evaluate.py
    deps:
    - path: data/processed_data/X_test_scaled.csv
      hash: md5
      md5: d88f7b762247806ce779f1da894f6631
      size: 85439
    - path: data/processed_data/y_test.csv
      hash: md5
      md5: 5b38d7f1d33d69d59474bfe27d9d039d
      size: 9723
    - path: models/rf_model.pkl
      hash: md5
      md5: 49dda6cdeb70bcd4d6c09ec5508a5332
      size: 25007361
    - path: src/models/evaluate.py
      hash: md5
      md5: 95c47e45918d3cc2d5eb7a9ed955b91f
      size: 2231
    outs:
    - path: data/prediction.csv
      hash: md5
      md5: 2d1c0e71e8650c34872ea04bc486338c
      size: 19884
    - path: metrics/scores.json
      hash: md5
      md5: 7107d17cb1fc49405c1252947d3b1e7b
      size: 117
